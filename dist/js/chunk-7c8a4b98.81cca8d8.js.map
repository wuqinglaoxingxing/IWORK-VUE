{"version":3,"sources":["webpack:///./src/assets/img-intercep.jpg","webpack:///./src/components-views/iwork-img-intercep.vue?7794","webpack:///./src/components/iwork-img-intercep.vue?ceb2","webpack:///src/components/iwork-img-intercep.vue","webpack:///./src/components/iwork-img-intercep.vue?1005","webpack:///./src/components/iwork-img-intercep.vue","webpack:///src/components-views/iwork-img-intercep.vue","webpack:///./src/components-views/iwork-img-intercep.vue?0316","webpack:///./src/components-views/iwork-img-intercep.vue","webpack:///./node_modules/core-js/internals/array-fill.js","webpack:///./src/components/iwork-img-intercep.vue?eccf","webpack:///./node_modules/core-js/modules/es.array.fill.js"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","attrs","picture","wrapWidth","edgeMax","computedUnitX","computedUnitY","getExtractImg","staticRenderFns","staticClass","style","width","_v","component","toObject","toAbsoluteIndex","toLength","value","O","length","argumentsLength","arguments","index","undefined","end","endPos","$","fill","addToUnscopables","target","proto"],"mappings":"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","file":"js/chunk-7c8a4b98.81cca8d8.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/img-intercep.f8e9497a.jpg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('iworkImgIntercep',{attrs:{\"picture\":_vm.picture,\"wrapWidth\":_vm.wrapWidth,\"edgeMax\":_vm.edgeMax,\"computedUnitX\":_vm.computedUnitX,\"computedUnitY\":_vm.computedUnitY,\"getExtractImg\":_vm.getExtractImg}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"img-intercep-wrap\"},[_c('div',{staticClass:\"pic_wrapper\"},[_c('img',{attrs:{\"src\":_vm.picture}}),_c('canvas',{staticClass:\"pic_show\"})]),_c('div',{staticClass:\"btn_list\",style:({width:_vm.wrapWidth+'px'})},[_c('button',{staticClass:\"translate\"},[_vm._v(\"截取\")]),_c('button',{staticClass:\"reset\"},[_vm._v(\"重置\")])]),_c('canvas',{staticClass:\"pic_draw\"})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"img-intercep-wrap\">\n        <div class=\"pic_wrapper\">\n            <img :src=\"picture\" />\n            <canvas class=\"pic_show\"></canvas>\n        </div>\n        <div class=\"btn_list\" :style=\"{width:wrapWidth+'px'}\">\n            <button class=\"translate\">截取</button>\n            <button class=\"reset\">重置</button>\n        </div>\n        <canvas class=\"pic_draw\"></canvas>\n    </div>\n</template>\n\n<script>\nexport default {\n    props: {\n        // 图片\n        picture: {\n            required: true,\n        },\n        // 图片显示宽度\n        wrapWidth: {\n            type: Number,\n            default: 500,\n        },\n        // 放大缩小单位X轴\n        computedUnitX: {\n            type: Number,\n            default: 200,\n        },\n        // 放大缩小单位Y轴\n        computedUnitY: {\n            type: Number,\n            default: 200,\n        },\n        // 可以移动到边缘的最大值\n        edgeMax: {\n            type: Number,\n            default: 10,\n        },\n        // 返回的截取的base64\n        getExtractImg: {\n            type: Function,\n        },\n        // 放大倍数\n        enLarge: {\n            type: Number,\n            default: 2,\n        },\n    },\n    data() {\n        return {};\n    },\n    mounted() {\n        let that = this;\n        let imgIntercepWrap = document.querySelector(\".img-intercep-wrap\");\n        let pic_wrapper = imgIntercepWrap.querySelector(\".pic_wrapper\");\n        let img = pic_wrapper.querySelector(\"img\");\n        let translate = imgIntercepWrap.querySelector(\".translate\");\n        let reset = imgIntercepWrap.querySelector(\".reset\");\n        /** @type {HTMLCanvasElement} */\n        let pic_show = pic_wrapper.querySelector(\".pic_show\");\n        let ctx = pic_show.getContext(\"2d\");\n\n        let initWidth,\n            initHeight,\n            disXO,\n            disYO,\n            maxWidth,\n            maxHeight,\n            wrapHeight;\n\n        img.onload = function () {\n            initWidth = img.width;\n            initHeight = img.height;\n\n            wrapHeight = parseInt((img.height / img.width) * that.wrapWidth);\n            maxWidth = that.wrapWidth * that.enLarge;\n            maxHeight = wrapHeight * that.enLarge;\n\n            img.width = that.wrapWidth;\n            img.height = wrapHeight;\n\n            pic_wrapper.style.width = that.wrapWidth + \"px\";\n            pic_wrapper.style.height = wrapHeight + \"px\";\n            pic_show.width = that.wrapWidth;\n            pic_show.height = wrapHeight;\n            // 初始化设置\n            img.style.width = img.width + \"px\";\n            img.style.height = img.height + \"px\";\n            img.style.top = 0;\n            img.style.left = 0;\n\n            ctx.beginPath();\n            ctx.fillStyle = \"rgba(255,255,255,0.3)\";\n            ctx.arc(\n                that.wrapWidth / 2,\n                wrapHeight / 2,\n                wrapHeight / 2,\n                0,\n                (Math.PI / 180) * 360,\n                false\n            );\n            ctx.fill();\n        };\n\n        let mousedownFn = function (e) {\n            e.preventDefault();\n            img.removeEventListener(\"mousemove\", mousemoveFn);\n            img.addEventListener(\"mousemove\", mousemoveFn);\n            disXO =\n                e.clientX -\n                pic_wrapper.offsetLeft -\n                parseInt(img.style.left ? img.style.left : 0);\n            disYO =\n                e.clientY -\n                pic_wrapper.offsetTop -\n                parseInt(img.style.top ? img.style.top : 0);\n        };\n        let mouseupFn = function (e) {\n            img.removeEventListener(\"mousemove\", mousemoveFn);\n        };\n        let mouseleaveFn = function (e) {\n            img.removeEventListener(\"mousemove\", mousemoveFn);\n        };\n        let mousewheelFn = function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            let wheelDelta = e.wheelDelta;\n            if (wheelDelta > 0) {\n                let lv = Math.abs(wheelDelta) / 120;\n                let newWidth = img.width - lv * that.computedUnitX;\n                let newHeight = img.height - lv * that.computedUnitY;\n                if (newWidth > that.wrapWidth / 2) {\n                    img.style.width = newWidth + \"px\";\n                } else {\n                    img.style.width = that.wrapWidth / 2 + \"px\";\n                }\n                if (newHeight > wrapHeight / 2) {\n                    img.style.height = newHeight + \"px\";\n                } else {\n                    img.style.height = wrapHeight / 2 + \"px\";\n                }\n            } else {\n                let lv = Math.abs(wheelDelta) / 120;\n                let newWidth = img.width + lv * that.computedUnitX;\n                let newHeight = img.height + lv * that.computedUnitY;\n                if (newWidth < maxWidth) {\n                    img.style.width = newWidth + \"px\";\n                } else {\n                    img.style.width = maxWidth + \"px\";\n                }\n                if (newHeight < maxHeight) {\n                    img.style.height = newHeight + \"px\";\n                } else {\n                    img.style.height = maxHeight + \"px\";\n                }\n            }\n        };\n        let mousemoveFn = function (e) {\n            e.preventDefault();\n            let { width: wWidth, height: wHeight } =\n                pic_wrapper.getBoundingClientRect();\n            let disXT = e.clientX - pic_wrapper.offsetLeft;\n            let disYT = e.clientY - pic_wrapper.offsetTop;\n            let disX = disXT - disXO;\n            let disY = disYT - disYO;\n            // -10可以移动到边缘的最大值\n            if (wWidth - disX < that.edgeMax) {\n                disX = wWidth - that.edgeMax;\n            } else if (disX + img.width < that.edgeMax) {\n                disX = that.edgeMax - img.width;\n            }\n            // -10可以移动到边缘的最大值\n            if (wHeight - disY < that.edgeMax) {\n                disY = wHeight - that.edgeMax;\n            } else if (disY + img.height < that.edgeMax) {\n                disY = that.edgeMax - img.height;\n            }\n            img.style.left = disX + \"px\";\n            img.style.top = disY + \"px\";\n        };\n        img.addEventListener(\"mousedown\", mousedownFn);\n        img.addEventListener(\"mouseleave\", mouseleaveFn);\n        img.addEventListener(\"mouseup\", mouseupFn);\n        img.addEventListener(\"mousewheel\", mousewheelFn);\n        translate.addEventListener(\n            \"click\",\n            function () {\n                const width = img.style.width;\n                const height = img.style.height;\n                const top = img.style.top;\n                const left = img.style.left;\n\n                let pic_draw = document.querySelector(\".pic_draw\");\n                pic_draw.width = wrapHeight;\n                pic_draw.height = wrapHeight;\n                let ctx1 = pic_draw.getContext(\"2d\");\n                ctx1.arc(\n                    wrapHeight / 2,\n                    wrapHeight / 2,\n                    wrapHeight / 2,\n                    0,\n                    (Math.PI / 180) * 360,\n                    false\n                );\n                ctx1.strokeStyle = \"#FFFFFF\"; // 设置绘制圆形边框的颜色\n                ctx1.stroke(); // 绘制出圆形，默认为黑色，可通过 ctx.strokeStyle = '#FFFFFF'， 设置想要的颜色\n                ctx1.clip();\n                let lvW = initWidth / img.width;\n                let lvH = initHeight / img.height;\n                ctx1.drawImage(\n                    img,\n                    (that.wrapWidth / 2 - wrapHeight / 2 - parseInt(left)) *\n                        lvW,\n                    -parseInt(top) * lvH,\n                    wrapHeight * lvW,\n                    wrapHeight * lvH,\n                    0,\n                    0,\n                    wrapHeight,\n                    wrapHeight\n                );\n                that.getExtractImg(pic_draw.toDataURL(\"image/png\"));\n            },\n            false\n        );\n        reset.addEventListener(\n            \"click\",\n            function () {\n                img.style.width = that.wrapWidth + \"px\";\n                img.style.height = wrapHeight + \"px\";\n                img.style.left = 0;\n                img.style.top = 0;\n            },\n            false\n        );\n    },\n};\n</script>\n<style lang=\"scss\" scoped>\n.img-intercep-wrap {\n    font-size: 0;\n    & > .pic_wrapper {\n        display: inline-block;\n        overflow: hidden;\n        cursor: move;\n        position: relative;\n        background: url(../assets/touming.png);\n        & > img {\n            position: absolute;\n            z-index: 1;\n        }\n\n        & > .pic_show {\n            left: 0;\n            top: 0;\n            position: absolute;\n            z-index: 2;\n            pointer-events: none;\n        }\n    }\n\n    & > .btn_list {\n        margin: 0.03rem auto;\n        display: flex;\n        & > button {\n            flex: 1;\n            border: none;\n        }\n        & > .translate {\n            height: 0.35rem;\n            border-right: 1px #ddd solid;\n            background: var(--first);\n        }\n        & > .reset {\n            background: var(--second);\n        }\n    }\n\n    // & > .pic_draw {\n    //     display: none;\n    // }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./iwork-img-intercep.vue?vue&type=template&id=18ebccae&scoped=true&\"\nimport script from \"./iwork-img-intercep.vue?vue&type=script&lang=js&\"\nexport * from \"./iwork-img-intercep.vue?vue&type=script&lang=js&\"\nimport style0 from \"./iwork-img-intercep.vue?vue&type=style&index=0&id=18ebccae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18ebccae\",\n  null\n  \n)\n\nexport default component.exports","<template>\n    <div>\n        <iworkImgIntercep\n            :picture=\"picture\"\n            :wrapWidth=\"wrapWidth\"\n            :edgeMax=\"edgeMax\"\n            :computedUnitX=\"computedUnitX\"\n            :computedUnitY=\"computedUnitY\"\n            :getExtractImg=\"getExtractImg\"\n        ></iworkImgIntercep>\n    </div>\n</template>\n\n<script>\nimport iworkImgIntercep from \"@/components/iwork-img-intercep.vue\";\nexport default {\n    components: {\n        iworkImgIntercep,\n    },\n    data() {\n        return {\n            picture: require(\"../assets/img-intercep.jpg\"),\n            wrapWidth:500,\n            computedUnitX:200,\n            computedUnitY:112,\n            edgeMax:10,\n            getExtractImg:function(imgBase64){\n                console.log(imgBase64);\n            }\n        };\n    },\n    created() {},\n};\n</script>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./iwork-img-intercep.vue?vue&type=template&id=973ac208&\"\nimport script from \"./iwork-img-intercep.vue?vue&type=script&lang=js&\"\nexport * from \"./iwork-img-intercep.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","'use strict';\nvar toObject = require('../internals/to-object');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\n\n// `Array.prototype.fill` method implementation\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\nmodule.exports = function fill(value /* , start = 0, end = @length */) {\n  var O = toObject(this);\n  var length = toLength(O.length);\n  var argumentsLength = arguments.length;\n  var index = toAbsoluteIndex(argumentsLength > 1 ? arguments[1] : undefined, length);\n  var end = argumentsLength > 2 ? arguments[2] : undefined;\n  var endPos = end === undefined ? length : toAbsoluteIndex(end, length);\n  while (endPos > index) O[index++] = value;\n  return O;\n};\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=style&index=0&id=18ebccae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./iwork-img-intercep.vue?vue&type=style&index=0&id=18ebccae&lang=scss&scoped=true&\"","var $ = require('../internals/export');\nvar fill = require('../internals/array-fill');\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.fill` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.fill\n$({ target: 'Array', proto: true }, {\n  fill: fill\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('fill');\n"],"sourceRoot":""}