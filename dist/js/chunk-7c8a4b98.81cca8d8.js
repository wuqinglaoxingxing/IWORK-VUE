(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c8a4b98"],{"157b":function(t,e,i){t.exports=i.p+"img/img-intercep.f8e9497a.jpg"},"35a8":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("iworkImgIntercep",{attrs:{picture:t.picture,wrapWidth:t.wrapWidth,edgeMax:t.edgeMax,computedUnitX:t.computedUnitX,computedUnitY:t.computedUnitY,getExtractImg:t.getExtractImg}})],1)},n=[],r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img-intercep-wrap"},[i("div",{staticClass:"pic_wrapper"},[i("img",{attrs:{src:t.picture}}),i("canvas",{staticClass:"pic_show"})]),i("div",{staticClass:"btn_list",style:{width:t.wrapWidth+"px"}},[i("button",{staticClass:"translate"},[t._v("截取")]),i("button",{staticClass:"reset"},[t._v("重置")])]),i("canvas",{staticClass:"pic_draw"})])},s=[],c=(i("cb29"),i("a9e3"),{props:{picture:{required:!0},wrapWidth:{type:Number,default:500},computedUnitX:{type:Number,default:200},computedUnitY:{type:Number,default:200},edgeMax:{type:Number,default:10},getExtractImg:{type:Function},enLarge:{type:Number,default:2}},data:function(){return{}},mounted:function(){var t,e,i,a,n,r,s,c=this,o=document.querySelector(".img-intercep-wrap"),p=o.querySelector(".pic_wrapper"),d=p.querySelector("img"),l=o.querySelector(".translate"),u=o.querySelector(".reset"),h=p.querySelector(".pic_show"),g=h.getContext("2d");d.onload=function(){t=d.width,e=d.height,s=parseInt(d.height/d.width*c.wrapWidth),n=c.wrapWidth*c.enLarge,r=s*c.enLarge,d.width=c.wrapWidth,d.height=s,p.style.width=c.wrapWidth+"px",p.style.height=s+"px",h.width=c.wrapWidth,h.height=s,d.style.width=d.width+"px",d.style.height=d.height+"px",d.style.top=0,d.style.left=0,g.beginPath(),g.fillStyle="rgba(255,255,255,0.3)",g.arc(c.wrapWidth/2,s/2,s/2,0,Math.PI/180*360,!1),g.fill()};var f=function(t){t.preventDefault(),d.removeEventListener("mousemove",y),d.addEventListener("mousemove",y),i=t.clientX-p.offsetLeft-parseInt(d.style.left?d.style.left:0),a=t.clientY-p.offsetTop-parseInt(d.style.top?d.style.top:0)},w=function(t){d.removeEventListener("mousemove",y)},m=function(t){d.removeEventListener("mousemove",y)},v=function(t){t.preventDefault(),t.stopPropagation();var e=t.wheelDelta;if(e>0){var i=Math.abs(e)/120,a=d.width-i*c.computedUnitX,o=d.height-i*c.computedUnitY;a>c.wrapWidth/2?d.style.width=a+"px":d.style.width=c.wrapWidth/2+"px",d.style.height=o>s/2?o+"px":s/2+"px"}else{var p=Math.abs(e)/120,l=d.width+p*c.computedUnitX,u=d.height+p*c.computedUnitY;d.style.width=l<n?l+"px":n+"px",d.style.height=u<r?u+"px":r+"px"}},y=function(t){t.preventDefault();var e=p.getBoundingClientRect(),n=e.width,r=e.height,s=t.clientX-p.offsetLeft,o=t.clientY-p.offsetTop,l=s-i,u=o-a;n-l<c.edgeMax?l=n-c.edgeMax:l+d.width<c.edgeMax&&(l=c.edgeMax-d.width),r-u<c.edgeMax?u=r-c.edgeMax:u+d.height<c.edgeMax&&(u=c.edgeMax-d.height),d.style.left=l+"px",d.style.top=u+"px"};d.addEventListener("mousedown",f),d.addEventListener("mouseleave",m),d.addEventListener("mouseup",w),d.addEventListener("mousewheel",v),l.addEventListener("click",(function(){d.style.width,d.style.height;var i=d.style.top,a=d.style.left,n=document.querySelector(".pic_draw");n.width=s,n.height=s;var r=n.getContext("2d");r.arc(s/2,s/2,s/2,0,Math.PI/180*360,!1),r.strokeStyle="#FFFFFF",r.stroke(),r.clip();var o=t/d.width,p=e/d.height;r.drawImage(d,(c.wrapWidth/2-s/2-parseInt(a))*o,-parseInt(i)*p,s*o,s*p,0,0,s,s),c.getExtractImg(n.toDataURL("image/png"))}),!1),u.addEventListener("click",(function(){d.style.width=c.wrapWidth+"px",d.style.height=s+"px",d.style.left=0,d.style.top=0}),!1)}}),o=c,p=(i("c136"),i("2877")),d=Object(p["a"])(o,r,s,!1,null,"18ebccae",null),l=d.exports,u={components:{iworkImgIntercep:l},data:function(){return{picture:i("157b"),wrapWidth:500,computedUnitX:200,computedUnitY:112,edgeMax:10,getExtractImg:function(t){console.log(t)}}},created:function(){}},h=u,g=Object(p["a"])(h,a,n,!1,null,null,null);e["default"]=g.exports},"81d5":function(t,e,i){"use strict";var a=i("7b0b"),n=i("23cb"),r=i("50c4");t.exports=function(t){var e=a(this),i=r(e.length),s=arguments.length,c=n(s>1?arguments[1]:void 0,i),o=s>2?arguments[2]:void 0,p=void 0===o?i:n(o,i);while(p>c)e[c++]=t;return e}},c136:function(t,e,i){"use strict";var a=i("e9fe"),n=i.n(a);n.a},cb29:function(t,e,i){var a=i("23e7"),n=i("81d5"),r=i("44d2");a({target:"Array",proto:!0},{fill:n}),r("fill")},e9fe:function(t,e,i){}}]);
//# sourceMappingURL=chunk-7c8a4b98.81cca8d8.js.map