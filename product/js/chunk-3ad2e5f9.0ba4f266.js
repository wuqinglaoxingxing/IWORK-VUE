(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3ad2e5f9"],{"157b":function(t,e,i){t.exports=i.p+"img/img-intercep.f8e9497a.jpg"},"35a8":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("iworkImgIntercep",{attrs:{picture:t.T1.picture,wrapWidth:t.T1.wrapWidth,edgeMax:t.T1.edgeMax,computedUnitX:t.T1.computedUnitX,computedUnitY:t.T1.computedUnitY,getExtractImg:t.T1.getExtractImg}}),i("div",{staticClass:"iworkImgIntercep-P"},[i("iworkImgIntercep",{attrs:{picture:t.T2.picture,selector:t.T2.selector,wrapWidth:t.T2.wrapWidth,edgeMax:t.T2.edgeMax,computedUnitX:t.T2.computedUnitX,computedUnitY:t.T2.computedUnitY,getExtractImg:t.T2.getExtractImg,enLarge:t.T2.enLarge,enSmall:t.T2.enSmall,sAreaTp:t.T2.sAreaTp,wRectUnitNum:t.T2.wRectUnitNum}})],1)],1)},a=[],n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img-intercep-wrap iwork-img-intercep"},[i("div",{staticClass:"pic_wrapper"},[i("img",{attrs:{src:t.picture}}),i("canvas",{staticClass:"pic_show"})]),i("div",{staticClass:"btn_list",style:{width:t.wrapWidth+"px"}},[i("button",{staticClass:"translate"},[t._v("截取")]),i("button",{staticClass:"reset"},[t._v("重置")])]),i("canvas",{staticClass:"pic_draw"})])},s=[],o=(i("cb29"),i("a9e3"),{name:"iworkImgIntercep",props:{picture:{required:!0},wrapWidth:{type:Number,default:500},computedUnitX:{type:Number,default:6},computedUnitY:{type:Number,default:6},edgeMax:{type:Number,default:10},getExtractImg:{type:Function},enLarge:{type:Number,default:2},enSmall:{type:Number,default:2},sAreaTp:{type:String,default:"circle"},selector:{type:String},wRectUnitNum:{type:Number,default:8}},data:function(){return{}},mounted:function(){var t,e,i,r,a,n,s,o,p=this;this.selector&&(t=null===(o=document.querySelector(this.selector))||void 0===o?void 0:o.querySelector(".img-intercep-wrap"));t||(t=document.querySelector(".img-intercep-wrap")),e=t.querySelector(".pic_wrapper"),i=e.querySelector("img"),n=t.querySelector(".translate"),s=t.querySelector(".reset"),r=e.querySelector(".pic_show"),a=r.getContext("2d");var c,d,l,u,g,w,m,h,f,v,A,b,y=this.wRectUnitNum;i.onload=function(){c=i.width,d=i.height,f=parseInt(i.height/i.width*p.wrapWidth),g=p.wrapWidth*p.enLarge,w=f*p.enLarge,m=p.wrapWidth/p.enSmall,h=f/p.enSmall,i.width=p.wrapWidth,i.height=f,e.style.width=p.wrapWidth+"px",e.style.height=f+"px",r.width=p.wrapWidth,r.height=f,i.style.width=i.width+"px",i.style.height=i.height+"px",i.style.top=0,i.style.left=0,a.beginPath(),a.fillStyle="rgba(255,255,255,.3)","rect"===p.sAreaTp&&(A=p.wrapWidth/y,b=f/y,a.fillRect(A,b,(y-2)*A,(y-2)*b)),"circle"===p.sAreaTp&&(v=p.wrapWidth>f?f:p.wrapWidth,a.arc(p.wrapWidth/2,f/2,v/2,0,Math.PI/180*360,!1)),a.fill()};var x=function(t){t.preventDefault(),e.removeEventListener("mousemove",M),i.addEventListener("mousemove",M),l=t.clientX-e.offsetLeft-parseInt(i.style.left?i.style.left:0),u=t.clientY-e.offsetTop-parseInt(i.style.top?i.style.top:0)},I=function(t){i.removeEventListener("mousemove",M)},W=function(t){i.removeEventListener("mousemove",M)},T=function(t){t.preventDefault(),t.stopPropagation();var e=t.wheelDelta,r=Math.abs(e)/120;r=r<1?1:r;var a,n,s=p.os().isMac,o=i.getAttribute("attrW")?parseFloat(i.getAttribute("attrW")):i.width,c=i.getAttribute("attrH")?parseFloat(i.getAttribute("attrH")):i.height;if(e>0&&s||!s&&e<0){var d=o-r*p.computedUnitX,l=c-r*p.computedUnitY;a=d>m?d:m,n=l>h?l:h}else{var u=o+r*p.computedUnitX,f=c+r*p.computedUnitY;a=u<g?u:g,n=f<w?f:w}i.style.width=a+"px",i.style.height=n+"px",i.setAttribute("attrW",a),i.setAttribute("attrH",n)},M=function(t){t.preventDefault();var r=e.getBoundingClientRect(),a=r.width,n=r.height,s=t.clientX-e.offsetLeft,o=t.clientY-e.offsetTop,c=s-l,d=o-u;a-c<p.edgeMax?c=a-p.edgeMax:c+i.width<p.edgeMax&&(c=p.edgeMax-i.width),n-d<p.edgeMax?d=n-p.edgeMax:d+i.height<p.edgeMax&&(d=p.edgeMax-i.height),i.style.left=c+"px",i.style.top=d+"px"};i.addEventListener("mousedown",x),i.addEventListener("mouseleave",W),i.addEventListener("mouseup",I),e.addEventListener("mousewheel",T),n.addEventListener("click",(function(){i.style.width,i.style.height;var e=i.style.top,r=i.style.left,a=c/i.width,n=d/i.height,s=t.querySelector(".pic_draw"),o=s.getContext("2d");"circle"===p.sAreaTp&&(s.width=v,s.height=v,o.arc(v/2,v/2,v/2,0,Math.PI/180*360,!1),o.strokeStyle="#FFFFFF",o.stroke(),o.clip(),o.drawImage(i,(p.wrapWidth/2-v/2-parseInt(r))*a,(f/2-v/2-parseInt(e))*n,v*a,v*n,0,0,v,v)),"rect"===p.sAreaTp&&(s.width=(y-2)*A,s.height=(y-2)*b,o.drawImage(i,(p.wrapWidth/y-parseInt(r))*a,(-parseInt(e)+b)*n+2,(y-2)*A*a,(y-2)*b*n,0,0,(y-2)*A,(y-2)*b)),p.getExtractImg(s.toDataURL("image/png"))}),!1),s.addEventListener("click",(function(){i.style.width=p.wrapWidth+"px",i.style.height=f+"px",i.style.left=0,i.style.top=0,i.removeAttribute("attrW"),i.removeAttribute("attrH")}),!1)},methods:{os:function(){var t=window.navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t),isMac:/mac os/.test(t)}}}}),p=o,c=(i("ac17"),i("2877")),d=Object(c["a"])(p,n,s,!1,null,"030d91e5",null),l=d.exports,u={components:{iworkImgIntercep:l},data:function(){return{T1:{picture:i("157b"),wrapWidth:500,computedUnitX:7,computedUnitY:4,edgeMax:10,getExtractImg:function(t){console.log(t)}},T2:{picture:i("67c9"),selector:".iworkImgIntercep-P",wrapWidth:500,computedUnitX:4.62,computedUnitY:10,edgeMax:10,getExtractImg:function(t){console.log(t)},enLarge:3,enSmall:6,sAreaTp:"rect",wRectUnitNum:8}}},created:function(){}},g=u,w=Object(c["a"])(g,r,a,!1,null,null,null);e["default"]=w.exports},"67c9":function(t,e,i){t.exports=i.p+"img/picture-magnifier-car.349ff52e.jpg"},"81d5":function(t,e,i){"use strict";var r=i("7b0b"),a=i("23cb"),n=i("50c4");t.exports=function(t){var e=r(this),i=n(e.length),s=arguments.length,o=a(s>1?arguments[1]:void 0,i),p=s>2?arguments[2]:void 0,c=void 0===p?i:a(p,i);while(c>o)e[o++]=t;return e}},"86f0":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA3NCSVQICAjb4U/gAAAABlBMVEXMzMz////TjRV2AAAACXBIWXMAAArrAAAK6wGCiw1aAAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M26LyyjAAAABFJREFUCJlj+M/AgBVhF/0PAH6/D/HkDxOGAAAAAElFTkSuQmCC"},9488:function(t,e,i){var r=i("24fb"),a=i("1de5"),n=i("86f0");e=r(!1);var s=a(n);e.push([t.i,".img-intercep-wrap[data-v-030d91e5]{display:flex;flex-direction:column;align-items:center;font-size:0}.img-intercep-wrap>.pic_wrapper[data-v-030d91e5]{display:inline-block;overflow:hidden;cursor:move;position:relative;background:url("+s+")}.img-intercep-wrap>.pic_wrapper>img[data-v-030d91e5]{position:absolute;z-index:1}.img-intercep-wrap>.pic_wrapper>.pic_show[data-v-030d91e5]{left:0;top:0;position:absolute;z-index:2;pointer-events:none}.img-intercep-wrap>.btn_list[data-v-030d91e5]{margin:.03rem auto;display:flex;font-size:.14rem}.img-intercep-wrap>.btn_list>button[data-v-030d91e5]{flex:1;border:none;outline:none}.img-intercep-wrap>.btn_list>.translate[data-v-030d91e5]{border-right:1px solid #ddd;background:var(--first)}.img-intercep-wrap>.btn_list>.reset[data-v-030d91e5]{background:var(--second)}",""]),t.exports=e},ac17:function(t,e,i){"use strict";var r=i("e7ba"),a=i.n(r);a.a},cb29:function(t,e,i){var r=i("23e7"),a=i("81d5"),n=i("44d2");r({target:"Array",proto:!0},{fill:a}),n("fill")},e7ba:function(t,e,i){var r=i("9488");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var a=i("499e").default;a("77aacb56",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=chunk-3ad2e5f9.0ba4f266.js.map