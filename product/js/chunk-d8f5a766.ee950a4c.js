(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8f5a766"],{"0ba9":function(t,e,i){},"157b":function(t,e,i){t.exports=i.p+"img/img-intercep.f8e9497a.jpg"},"35a8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("iworkImgIntercep",{attrs:{picture:t.picture,wrapWidth:t.wrapWidth,edgeMax:t.edgeMax,computedUnitX:t.computedUnitX,computedUnitY:t.computedUnitY,getExtractImg:t.getExtractImg}})],1)},s=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img-intercep-wrap"},[i("div",{staticClass:"pic_wrapper"},[i("img",{attrs:{src:t.picture}}),i("canvas",{staticClass:"pic_show"})]),i("div",{staticClass:"btn_list",style:{width:t.wrapWidth+"px"}},[i("button",{staticClass:"translate"},[t._v("截取")]),i("button",{staticClass:"reset"},[t._v("重置")])]),i("canvas",{staticClass:"pic_draw"})])},r=[],o=(i("cb29"),i("a9e3"),{name:"iworkImgIntercep",props:{picture:{required:!0},wrapWidth:{type:Number,default:500},computedUnitX:{type:Number,default:6},computedUnitY:{type:Number,default:6},edgeMax:{type:Number,default:10},getExtractImg:{type:Function},enLarge:{type:Number,default:2}},data:function(){return{}},mounted:function(){var t,e,i,n,s,a,r,o=this,d=document.querySelector(".img-intercep-wrap"),c=d.querySelector(".pic_wrapper"),p=c.querySelector("img"),l=d.querySelector(".translate"),u=d.querySelector(".reset"),h=c.querySelector(".pic_show"),w=h.getContext("2d");p.onload=function(){t=p.width,e=p.height,r=parseInt(p.height/p.width*o.wrapWidth),s=o.wrapWidth*o.enLarge,a=r*o.enLarge,p.width=o.wrapWidth,p.height=r,c.style.width=o.wrapWidth+"px",c.style.height=r+"px",h.width=o.wrapWidth,h.height=r,p.style.width=p.width+"px",p.style.height=p.height+"px",p.style.top=0,p.style.left=0,w.beginPath(),w.fillStyle="rgba(255,255,255,0.3)",w.arc(o.wrapWidth/2,r/2,r/2,0,Math.PI/180*360,!1),w.fill()};var g=function(t){t.preventDefault(),p.removeEventListener("mousemove",y),p.addEventListener("mousemove",y),i=t.clientX-c.offsetLeft-parseInt(p.style.left?p.style.left:0),n=t.clientY-c.offsetTop-parseInt(p.style.top?p.style.top:0)},m=function(t){p.removeEventListener("mousemove",y)},f=function(t){p.removeEventListener("mousemove",y)},v=function(t){t.preventDefault(),t.stopPropagation();var e=t.wheelDelta,i=Math.abs(e)/120;i=i<1?1:i;var n=o.os().isMac;if(e>0&&n||!n&&e<0){var d=p.width-i*o.computedUnitX,c=p.height-i*o.computedUnitY;d>o.wrapWidth/2?p.style.width=d+"px":p.style.width=o.wrapWidth/2+"px",p.style.height=c>r/2?c+"px":r/2+"px",console.log(d,c,o.wrapWidth)}else{var l=p.width+i*o.computedUnitX,u=p.height+i*o.computedUnitY;p.style.width=l<s?l+"px":s+"px",p.style.height=u<a?u+"px":a+"px",console.log(l,u)}},y=function(t){t.preventDefault();var e=c.getBoundingClientRect(),s=e.width,a=e.height,r=t.clientX-c.offsetLeft,d=t.clientY-c.offsetTop,l=r-i,u=d-n;s-l<o.edgeMax?l=s-o.edgeMax:l+p.width<o.edgeMax&&(l=o.edgeMax-p.width),a-u<o.edgeMax?u=a-o.edgeMax:u+p.height<o.edgeMax&&(u=o.edgeMax-p.height),p.style.left=l+"px",p.style.top=u+"px"};p.addEventListener("mousedown",g),p.addEventListener("mouseleave",f),p.addEventListener("mouseup",m),c.addEventListener("mousewheel",v),l.addEventListener("click",(function(){p.style.width,p.style.height;var i=p.style.top,n=p.style.left,s=document.querySelector(".pic_draw");s.width=r,s.height=r;var a=s.getContext("2d");a.arc(r/2,r/2,r/2,0,Math.PI/180*360,!1),a.strokeStyle="#FFFFFF",a.stroke(),a.clip();var d=t/p.width,c=e/p.height;a.drawImage(p,(o.wrapWidth/2-r/2-parseInt(n))*d,-parseInt(i)*c,r*d,r*c,0,0,r,r),o.getExtractImg(s.toDataURL("image/png"))}),!1),u.addEventListener("click",(function(){p.style.width=o.wrapWidth+"px",p.style.height=r+"px",p.style.left=0,p.style.top=0}),!1)},methods:{os:function(){var t=window.navigator.userAgent.toLowerCase();return{isIpad:/ipad/.test(t),isIphone:/iphone os/.test(t),isAndroid:/android/.test(t),isWindowsCe:/windows ce/.test(t),isWindowsMobile:/windows mobile/.test(t),isWin2K:/windows nt 5.0/.test(t),isXP:/windows nt 5.1/.test(t),isVista:/windows nt 6.0/.test(t),isWin7:/windows nt 6.1/.test(t),isWin8:/windows nt 6.2/.test(t),isWin81:/windows nt 6.3/.test(t),isMac:/mac os/.test(t)}}}}),d=o,c=(i("5d88"),i("2877")),p=Object(c["a"])(d,a,r,!1,null,"6e3bd180",null),l=p.exports,u={components:{iworkImgIntercep:l},data:function(){return{picture:i("157b"),wrapWidth:500,computedUnitX:7,computedUnitY:4,edgeMax:10,getExtractImg:function(t){console.log(t)}}},created:function(){}},h=u,w=Object(c["a"])(h,n,s,!1,null,null,null);e["default"]=w.exports},"5d88":function(t,e,i){"use strict";var n=i("0ba9"),s=i.n(n);s.a},"81d5":function(t,e,i){"use strict";var n=i("7b0b"),s=i("23cb"),a=i("50c4");t.exports=function(t){var e=n(this),i=a(e.length),r=arguments.length,o=s(r>1?arguments[1]:void 0,i),d=r>2?arguments[2]:void 0,c=void 0===d?i:s(d,i);while(c>o)e[o++]=t;return e}},cb29:function(t,e,i){var n=i("23e7"),s=i("81d5"),a=i("44d2");n({target:"Array",proto:!0},{fill:s}),a("fill")}}]);
//# sourceMappingURL=chunk-d8f5a766.ee950a4c.js.map