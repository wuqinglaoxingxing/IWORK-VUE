(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c0d4c33"],{"157b":function(t,e,i){t.exports=i.p+"img/img-intercep.f8e9497a.jpg"},"21fa":function(t,e,i){"use strict";var n=i("4e75"),r=i.n(n);r.a},"35a8":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("iworkImgIntercep",{attrs:{picture:t.picture,wrapWidth:t.wrapWidth,edgeMax:t.edgeMax,computedUnitX:t.computedUnitX,computedUnitY:t.computedUnitY,getExtractImg:t.getExtractImg}})],1)},r=[],a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"img-intercep-wrap"},[i("div",{staticClass:"pic_wrapper"},[i("img",{attrs:{src:t.picture}}),i("canvas",{staticClass:"pic_show"})]),i("div",{staticClass:"btn_list",style:{width:t.wrapWidth+"px"}},[i("button",{staticClass:"translate"},[t._v("截取")]),i("button",{staticClass:"reset"},[t._v("重置")])]),i("canvas",{staticClass:"pic_draw"})])},s=[],o=(i("cb29"),i("a9e3"),{props:{picture:{required:!0},wrapWidth:{type:Number,default:500},computedUnitX:{type:Number,default:6},computedUnitY:{type:Number,default:6},edgeMax:{type:Number,default:10},getExtractImg:{type:Function},enLarge:{type:Number,default:2}},data:function(){return{}},mounted:function(){var t,e,i,n,r,a,s,o=this,c=document.querySelector(".img-intercep-wrap"),d=c.querySelector(".pic_wrapper"),p=d.querySelector("img"),l=c.querySelector(".translate"),u=c.querySelector(".reset"),h=d.querySelector(".pic_show"),g=h.getContext("2d");p.onload=function(){t=p.width,e=p.height,s=parseInt(p.height/p.width*o.wrapWidth),r=o.wrapWidth*o.enLarge,a=s*o.enLarge,p.width=o.wrapWidth,p.height=s,d.style.width=o.wrapWidth+"px",d.style.height=s+"px",h.width=o.wrapWidth,h.height=s,p.style.width=p.width+"px",p.style.height=p.height+"px",p.style.top=0,p.style.left=0,g.beginPath(),g.fillStyle="rgba(255,255,255,0.3)",g.arc(o.wrapWidth/2,s/2,s/2,0,Math.PI/180*360,!1),g.fill()};var f=function(t){t.preventDefault(),p.removeEventListener("mousemove",y),p.addEventListener("mousemove",y),i=t.clientX-d.offsetLeft-parseInt(p.style.left?p.style.left:0),n=t.clientY-d.offsetTop-parseInt(p.style.top?p.style.top:0)},w=function(t){p.removeEventListener("mousemove",y)},m=function(t){p.removeEventListener("mousemove",y)},v=function(t){t.preventDefault(),t.stopPropagation();var e=t.wheelDelta,i=Math.abs(e)/120;i=i<1?1:i;var n=o.gmtds.os.isMac;if(e>0&&n||!n&&e<0){var c=p.width-i*o.computedUnitX,d=p.height-i*o.computedUnitY;c>o.wrapWidth/2?p.style.width=c+"px":p.style.width=o.wrapWidth/2+"px",p.style.height=d>s/2?d+"px":s/2+"px",console.log(c,d,o.wrapWidth)}else{var l=p.width+i*o.computedUnitX,u=p.height+i*o.computedUnitY;p.style.width=l<r?l+"px":r+"px",p.style.height=u<a?u+"px":a+"px",console.log(l,u)}},y=function(t){t.preventDefault();var e=d.getBoundingClientRect(),r=e.width,a=e.height,s=t.clientX-d.offsetLeft,c=t.clientY-d.offsetTop,l=s-i,u=c-n;r-l<o.edgeMax?l=r-o.edgeMax:l+p.width<o.edgeMax&&(l=o.edgeMax-p.width),a-u<o.edgeMax?u=a-o.edgeMax:u+p.height<o.edgeMax&&(u=o.edgeMax-p.height),p.style.left=l+"px",p.style.top=u+"px"};p.addEventListener("mousedown",f),p.addEventListener("mouseleave",m),p.addEventListener("mouseup",w),d.addEventListener("mousewheel",v),l.addEventListener("click",(function(){p.style.width,p.style.height;var i=p.style.top,n=p.style.left,r=document.querySelector(".pic_draw");r.width=s,r.height=s;var a=r.getContext("2d");a.arc(s/2,s/2,s/2,0,Math.PI/180*360,!1),a.strokeStyle="#FFFFFF",a.stroke(),a.clip();var c=t/p.width,d=e/p.height;a.drawImage(p,(o.wrapWidth/2-s/2-parseInt(n))*c,-parseInt(i)*d,s*c,s*d,0,0,s,s),o.getExtractImg(r.toDataURL("image/png"))}),!1),u.addEventListener("click",(function(){p.style.width=o.wrapWidth+"px",p.style.height=s+"px",p.style.left=0,p.style.top=0}),!1)}}),c=o,d=(i("21fa"),i("2877")),p=Object(d["a"])(c,a,s,!1,null,"c1697078",null),l=p.exports,u={components:{iworkImgIntercep:l},data:function(){return{picture:i("157b"),wrapWidth:500,computedUnitX:7,computedUnitY:4,edgeMax:10,getExtractImg:function(t){console.log(t)}}},created:function(){}},h=u,g=Object(d["a"])(h,n,r,!1,null,null,null);e["default"]=g.exports},"4e75":function(t,e,i){},"81d5":function(t,e,i){"use strict";var n=i("7b0b"),r=i("23cb"),a=i("50c4");t.exports=function(t){var e=n(this),i=a(e.length),s=arguments.length,o=r(s>1?arguments[1]:void 0,i),c=s>2?arguments[2]:void 0,d=void 0===c?i:r(c,i);while(d>o)e[o++]=t;return e}},cb29:function(t,e,i){var n=i("23e7"),r=i("81d5"),a=i("44d2");n({target:"Array",proto:!0},{fill:r}),a("fill")}}]);
//# sourceMappingURL=chunk-0c0d4c33.564f73fa.js.map